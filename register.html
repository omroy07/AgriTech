<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="images/logo.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <title>Register - AgriTech</title>
  <link rel="icon" type="image/png" href="/AgriTech/images/logo.png">
  <link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="register.css">
</head>
<body>
  <div class="form-container">

    <!-- NEW: back / close button -->
    <button class="back-button" type="button" aria-label="Go back"
            onclick="handleBack()">
      <i class="fas fa-arrow-left"></i>
    </button>

    <div style="position: absolute; top: 20px; right: 20px;">
      <button class="theme-toggle" aria-label="Toggle dark/light mode"
        style="background: rgba(46, 125, 50, 0.1);
               border: 1px solid rgba(46, 125, 50, 0.3);
               color: #2e7d32;">
        <i class="fas fa-sun sun-icon"></i>
        <i class="fas fa-moon moon-icon"></i>
        <span class="theme-text">Light</span>
      </button>
    </div>
    
    <div class="brand-section">
      <a href="./index.html" class="brand-icon">
        <i class="fas fa-seedling"></i>
      </a>
      <h2>Join AgriTech</h2>
      <p class="form-subtitle">Create your account to get started</p>
    </div>
    
    <!-- Form progress indicator -->
    <div class="form-progress">
      <div class="progress-step active" id="step-1"></div>
      <div class="progress-step" id="step-2"></div>
      <div class="progress-step" id="step-3"></div>
      <div class="progress-step" id="step-4"></div>
      <div class="progress-step" id="step-5"></div>
    </div>
    
    <form onsubmit="handleRegister(event)">
      <div class="input-group">
        <i class="fas fa-user-tag role-buyer" id="role-icon"></i>
        <select id="role" required onchange="updateRoleIcon()">
          <option value="">Select Your Role</option>
          <option value="buyer">üõí Buyer</option>
          <option value="farmer">üöú Farmer</option>
          <option value="equipment">üîß Equipment Shopkeeper</option>
          <option value="grocery">üè™ Grocery Shopkeeper</option>
        </select>
      </div>
      
      <div class="input-group">
        <i class="fas fa-user"></i>
        <input type="text" id="fullname" placeholder="Enter your full name" required>
      </div>
      
      <div class="input-group">
        <i class="fas fa-envelope"></i>
        <input type="email" id="email" placeholder="Enter your email" required>
      </div>
      
      <div class="input-group">
        <i class="fas fa-lock"></i>
        <input type="password" id="password"
               placeholder="Create a strong password"
               required oninput="checkPasswordStrength()">
        <button type="button" class="password-toggle" onclick="togglePassword()">
          <i class="fas fa-eye" id="password-eye"></i>
        </button>
      </div>
      
      <!-- Password strength indicator -->
      <div class="password-strength">
        <div class="strength-bar" id="strength-bar"></div>
      </div>
      <div class="strength-text" id="strength-text"></div>
      
      <button type="submit" id="register-btn">
        <span id="register-text">Create Account</span>
      </button>
      
      <p>Already have an account? <a href="login.html">Sign In</a></p>
    </form>
  </div>

  <script src="register.js"></script>
  <script src="theme.js"></script>
  <script src="auth.js"></script>
  <script>
    // Redirect if already logged in
    document.addEventListener('DOMContentLoaded', () => {
      redirectIfLoggedIn();
    });
  </script>
  <!-- ===== Universal Back To Top Button (All Pages) ===== -->
<style>
  #globalBackToTop {
    position: fixed;
    bottom: 90px; /* prevents overlap with chatbot/floating icons */
    right: 25px;
    z-index: 9999;
    display: none;
    background: #2ecc71;
    color: #ffffff;
    border: none;
    border-radius: 50%;
    width: 52px;
    height: 52px;
    font-size: 22px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    transition: opacity 0.3s ease, transform 0.2s ease;
  }

  #globalBackToTop:hover {
    transform: scale(1.12);
    background: #27ae60;
  }

  @media (max-width: 768px) {
    #globalBackToTop {
      bottom: 100px; /* better spacing on mobile */
      right: 18px;
      width: 48px;
      height: 48px;
      font-size: 20px;
    }
  }
</style>

<button id="globalBackToTop" title="Back to Top">‚Üë</button>

<script>
  (function () {
    const btn = document.getElementById("globalBackToTop");

    // Show button after scrolling down
    window.addEventListener("scroll", function () {
      if (window.scrollY > 300) {
        btn.style.display = "block";
      } else {
        btn.style.display = "none";
      }
    });

    // Smooth scroll to top on click
    btn.addEventListener("click", function () {
      window.scrollTo({
        top: 0,
        behavior: "smooth"
      });
    });
  })();
</script>
<!-- ===== End Back To Top Button ===== -->

</body>
</html>
